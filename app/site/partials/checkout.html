<shop-navbar></shop-navbar>

<div class="container">
	<button type="submit" class="btn btn-default" ng-click='ctrl.goBack()'>Back</button>
	<div class="cart-list panel panel-default">
		<div class="panel-heading"ng-click='ctrl.selected = 1'>
			<h4 ng-click='ctrl.selected = 1'>Cart:</h4>
			<h4 class='panel-heading-right'ng-hide='ctrl.selected == 1'>Total: {{ctrl.total * 1.13|currency}}</h4>
		</div>
		<ul class="panel-body" ng-show='ctrl.selected == 1'>
			<form name='cartForm'>
			<li ng-repeat='item in ctrl.cart'>
			<div>
				<img ng-src='{{item.product.image}}'>Name: {{item.product.name}}
				{{item.product.price|currency}}
				Quantity: <input type="number" 
					ng-model='item.quantity' 
					max='{{item.product.quantity}}'
					min='1'
					name='qty_{{$index}}'
					ng-class="{'invalid-form':cartForm['qty_' +$index].$invalid}">
				Total: {{item.quantity * item.product.price | currency}}
				<button class="btn btn-danger btn-xs" ng-click='ctrl.removeCart($index)'><i class="fa fa-times"></i></button>
			</div></li>
			<h3>Subtotal:{{ctrl.total|currency}}</h3>
			<h3>Tax:{{ctrl.total * 0.13 |currency}}</h3>
			<h3>Total:{{ctrl.total * 1.13|currency}}</h3>
			<button class="btn btn-success" ng-click='ctrl.selected = 2'>Confirm</button>
			<button class="btn btn-warning" ng-click='ctrl.processOrder()'>Process Order</button>
			</form>
		</ul>
		
	</div>

	<div class="ship-form panel panel-default">
		<div class="panel-heading"ng-click='ctrl.selected = 2'>
			<h4>Shipping and Billing Info</h4>
		</div>
		<div class="panel-body" ng-show='ctrl.selected == 2'>
			<form name='addressForm'>
				<div class="form-group">
					<label for="name">Name</label>
					<input type="text" class="form-control"	name="name" placeholder="Name" ng-model='ctrl.name' required></input>
				</div>
				<div class="form-group">
					<label for="email">Email</label>
					<input type="email" class="form-control"	name="email" placeholder="Email" ng-model='ctrl.email' required></input>
				</div>
				<div class="form-group">
					<label for="name">Address:</label>
					<input type="text" class="form-control"	name="address" placeholder="Address" ng-model='ctrl.address'></input>
				</div>
				<div class="form-group">
					<label for="name">City:</label>
					<input type="text" class="form-control"	name="city" placeholder="City" ng-model='ctrl.city'></input>
				</div>
				<div class="form-group">
					<label for="name">Province/State/Region:</label>
					<input type="text" class="form-control"	name="province" placeholder="Province" ng-model='ctrl.province'></input>
				</div>
				<div class="form-group">
					<label for="name">Postal Code/ZIP: </label>
					<input type="text" class="form-control"	name="postal" placeholder="Postal Code" ng-model='ctrl.postal'></input>
				</div>
			</form>
			<button class="btn btn-success" ng-disabled= '!addressForm.$valid'
			ng-click='ctrl.selected = 2'>Confirm</button>
		</div>
	</div>

	<div class="payment-form panel panel-default">
		<div class="panel-heading"ng-click='ctrl.selected = 3'>
			<h4>Payment Info</h4>
		</div>
		<div class="panel-body" ng-show='ctrl.selected == 3'>
			<form name='cardForm'>
				<div class="form-group">
					<label for="cardnumber">Credit Card Number</label>
					<input type="text" class="form-control"	name="cardnumber" placeholder="Card Number" ng-model='ctrl.card_number' required></input>
				</div>
				<div class="form-group">
					<label for="cardname">Name on Card</label>
					<input type="text" class="form-control"	name="cardname" placeholder="Name" ng-model='ctrl.card_name' required></input>
				</div>
				<div class="form-group">
					<label for="name">Expires on</label>
					<input type="number" class="form-control" name="cardexpiry" placeholder="MMYY" ng-model='ctrl.card_expiry'required></input>
				</div>
			</form>
			<button class="btn btn-success" ng-disabled= '!cardForm.$valid'
			ng-click='ctrl.selected = 2'>Confirm</button>
		</div>
	</div>

</div>